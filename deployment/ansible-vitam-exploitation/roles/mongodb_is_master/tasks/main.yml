---

- name: Check if node is master or not
  command: "mongo --host {{ ip_service }} --port {{ mongo_port }} --quiet --eval 'rs.isMaster().ismaster'"
  register: isMaster

- name: Get ReplicaSet member status
  set_fact:
    mongo_is_master: "{{ isMaster.stdout_lines|first|lower }}"
    mongo_offer_provider: "{{ vitam_offers[hostvars[inventory_hostname]['mongo_cluster_name']]['provider'] }}"
