---

- name: Ensure service is started
  service:
    name: "vitam-functional-administration"
    state: started

- name: "Wait until service functional-admin is up"
  wait_for:
      host: "{{hostvars[groups['hosts-functional-administration'][0]]['ip_admin']}}"
      port: "{{vitam.functional_administration.port_admin}}"
      state: "started"
      timeout: "{{ vitam_defaults.services.start_timeout }}"
  run_once: true


# -----
## By tenant collections 
# -----

# unit
- import_tasks: "unit.yml"

# logbookoperation
- import_tasks: "logbookoperation.yml"

# objectgroup
- import_tasks: "objectgroup.yml"

# -----
## Multi tenant collections 
# -----

# securityprofile
- import_tasks: "securityprofile.yml"

# context
- import_tasks: "context.yml"

# ontology
- import_tasks: "ontology.yml"

# ingestcontract
- import_tasks: "ingestcontract.yml"

# agencies
- import_tasks: "agencies.yml"

# accessionregisterdetail
- import_tasks: "accessionregisterdetail.yml"

# archiveunitprofile
- import_tasks: "archiveunitprofile.yml"

# accessionregistersummary
- import_tasks: "accessionregistersummary.yml"

# accesscontract
- import_tasks: "accesscontract.yml"

# fileformat
- import_tasks: "fileformat.yml"

# filerules
- import_tasks: "filerules.yml"

# profile
- import_tasks: "profile.yml" 