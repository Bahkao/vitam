---

# Primary site
- name: Ensure vitam-create-accession-register-symbolic timer is stopped
  systemd:
    name: "vitam-create-accession-register-symbolic.timer"
    state: "stopped"
  when: "'vitam-create-accession-register-symbolic.timer' in ansible_facts.services"

# Wait for the service to be stopped
- name: Wait for vitam-create-accession-register-symbolic service to be stopped
  wait_for_service:
    name: "vitam-create-accession-register-symbolic.service"
    state: "stopped"
    timeout: "{{ vitam_defaults.services.stop_timeout }}"
  when: "'vitam-create-accession-register-symbolic.service' in ansible_facts.services"

# Primary site
- name: Ensure vitam-rule-management-audit timer is stopped
  systemd:
    name: "vitam-rule-management-audit.timer"
    state: "stopped"
  when: "'vitam-rule-management-audit.timer' in ansible_facts.services"

# Wait for the service to be stopped
- name: Wait for vitam-rule-management-audit service to be stopped
  wait_for_service:
    name: "vitam-rule-management-audit.service"
    state: "stopped"
    timeout: "{{ vitam_defaults.services.stop_timeout }}"
  when: "'vitam-rule-management-audit.service' in ansible_facts.services"

# Secondary site
- name: Ensure vitam-functional-administration-reconstruction timer is stopped
  systemd:
    name: "vitam-functional-administration-reconstruction.timer"
    state: "stopped"
  when: "'vitam-functional-administration-reconstruction.timer' in ansible_facts.services"

- name: Ensure vitam-functional-administration-accession-register-reconstruction timer is stopped
  systemd:
    name: "vitam-functional-administration-accession-register-reconstruction.timer"
    state: "stopped"
  when: "'vitam-functional-administration-accession-register-reconstruction.timer' in ansible_facts.services"

# Wait for the service to be stopped
- name: Wait for vitam-functional-administration-reconstruction service to be stopped
  wait_for_service:
    name: "vitam-functional-administration-reconstruction.service"
    state: "stopped"
    timeout: "{{ vitam_defaults.services.stop_timeout }}"
  when: "'vitam-functional-administration-reconstruction.service' in ansible_facts.services"

- name: Wait for vitam-functional-administration-accession-register-reconstruction service to be stopped
  wait_for_service:
    name: "vitam-functional-administration-accession-register-reconstruction.service"
    state: "stopped"
    timeout: "{{ vitam_defaults.services.stop_timeout }}"
  when: "'vitam-functional-administration-accession-register-reconstruction.service' in ansible_facts.services"
