---

- name: Ensure vitam-metadata-reconstruction timer is stopped
  systemd:
    name: "vitam-metadata-reconstruction.timer"
    state: "stopped"

# Wait for the service to be stopped
- name: Wait for vitam-metadata-reconstruction service to be stopped
  wait_for_service:
    name: "vitam-metadata-reconstruction.service"
    state: "stopped"
    timeout: 300

- name: Ensure vitam-metadata-store-graph timer is stopped
  systemd:
    name: "vitam-metadata-store-graph.timer"
    state: "stopped"

# Wait for the service to be stopped
- name: Wait for vitam-metadata-store-graph service to be stopped
  wait_for_service:
    name: "vitam-metadata-store-graph.service"
    state: "stopped"
    timeout: 300
