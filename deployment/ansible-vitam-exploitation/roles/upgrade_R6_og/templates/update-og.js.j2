
// Switch to masterdata database
db = db.getSiblingDB('metadata');

db.ObjectGroup.find({ '_qualifiers.versions.PhysicalDimensions': { $exists: 1 } }).snapshot().forEach(function(item)
{
   for(i = 0; i != item._qualifiers.length; ++i)
   {
     for(j = 0; j != item._qualifiers[i].versions.length; ++j)
     {
		if (item._qualifiers[i].versions[j].PhysicalDimensions != undefined) {
			if (item._qualifiers[i].versions[j].PhysicalDimensions.Width != undefined && item._qualifiers[i].versions[j].PhysicalDimensions.Width.value != undefined) {
			  item._qualifiers[i].versions[j].PhysicalDimensions.Width.dValue = item._qualifiers[i].versions[j].PhysicalDimensions.Width.value;
			  delete item._qualifiers[i].versions[j].PhysicalDimensions.Width.value;
			}
			if (item._qualifiers[i].versions[j].PhysicalDimensions.Height != undefined && item._qualifiers[i].versions[j].PhysicalDimensions.Height.value != undefined) {
			  item._qualifiers[i].versions[j].PhysicalDimensions.Height.dValue = item._qualifiers[i].versions[j].PhysicalDimensions.Height.value;
			  delete item._qualifiers[i].versions[j].PhysicalDimensions.Height.value;
			}
			if (item._qualifiers[i].versions[j].PhysicalDimensions.Depth != undefined && item._qualifiers[i].versions[j].PhysicalDimensions.Depth.value != undefined) {
			  item._qualifiers[i].versions[j].PhysicalDimensions.Depth.dValue = item._qualifiers[i].versions[j].PhysicalDimensions.Depth.value;
			  delete item._qualifiers[i].versions[j].PhysicalDimensions.Depth.value;
			}
			if (item._qualifiers[i].versions[j].PhysicalDimensions.Shape != undefined && item._qualifiers[i].versions[j].PhysicalDimensions.Shape.value != undefined) {
			  item._qualifiers[i].versions[j].PhysicalDimensions.Shape.dValue = item._qualifiers[i].versions[j].PhysicalDimensions.Shape.value;
			  delete item._qualifiers[i].versions[j].PhysicalDimensions.Shape.value;
			}
			if (item._qualifiers[i].versions[j].PhysicalDimensions.Diameter != undefined && item._qualifiers[i].versions[j].PhysicalDimensions.Diameter.value != undefined) {
			  item._qualifiers[i].versions[j].PhysicalDimensions.Diameter.dValue = item._qualifiers[i].versions[j].PhysicalDimensions.Diameter.value;
			  delete item._qualifiers[i].versions[j].PhysicalDimensions.Diameter.value;
			}
			if (item._qualifiers[i].versions[j].PhysicalDimensions.Length != undefined && item._qualifiers[i].versions[j].PhysicalDimensions.Length.value != undefined) {
			  item._qualifiers[i].versions[j].PhysicalDimensions.Length.dValue = item._qualifiers[i].versions[j].PhysicalDimensions.Length.value;
			  delete item._qualifiers[i].versions[j].PhysicalDimensions.Length.value;
			}
			if (item._qualifiers[i].versions[j].PhysicalDimensions.Thickness != undefined && item._qualifiers[i].versions[j].PhysicalDimensions.Thickness.value != undefined) {
			  item._qualifiers[i].versions[j].PhysicalDimensions.Thickness.dValue = item._qualifiers[i].versions[j].PhysicalDimensions.Thickness.value;
			  delete item._qualifiers[i].versions[j].PhysicalDimensions.Thickness.value;
			}
			if (item._qualifiers[i].versions[j].PhysicalDimensions.Weight != undefined && item._qualifiers[i].versions[j].PhysicalDimensions.Weight.value != undefined) {
			  item._qualifiers[i].versions[j].PhysicalDimensions.Weight.dValue = item._qualifiers[i].versions[j].PhysicalDimensions.Weight.value;
			  delete item._qualifiers[i].versions[j].PhysicalDimensions.Weight.value;
			}
        }
     }
   }
   db.ObjectGroup.update({_id: item._id}, item);
});
