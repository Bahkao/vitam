---
# tasks file for vitam_autotest
- name: check autotest for {{ vitam_component }} component
  uri:
    url: '{{ protocol }}://{{ hote }}:{{ port }}/admin/v1/autotest'
    method: GET
    status_code: 200
    validate_certs: no
    return_content: yes
    timeout: "{{ vitam_defaults.services.api_call_timeout }}"
  register: response
  ignore_errors: true

# commented as all components are not yet with autotest
# - action: fail
#   when: response | failed

- debug: var=(response.content|from_json)
  when: response | succeeded  