{% if inventory_hostname in groups['hosts-mongoc-data'] %}
- module: mongodb
  hosts: ["{{ip_service}}:{{ mongodb.mongod_port }}"]
  metricsets: ["collstats","dbstats", "status"]
  username: {{ mongodb['mongo-data']['localadmin']['user'] }}
  password: {{ mongodb['mongo-data']['localadmin']['password'] }}
  period: {{ metricbeat.mongodb.period }}s
{% endif %}

{% if inventory_hostname in groups['hosts-mongod-data'] %}
- module: mongodb
  hosts: ["{{ip_service}}:{{ mongodb.mongod_port }}"]
  metricsets: ["dbstats", "status"]
  username: {{ mongodb['mongo-data']['localadmin']['user'] }}
  password: {{ mongodb['mongo-data']['localadmin']['password'] }}
  period: {{ metricbeat.mongodb.period }}s
{% endif %}

{% if inventory_hostname in groups['hosts-mongos-data'] %}
- module: mongodb
  hosts: ["{{ip_service}}:{{ mongodb.mongos_port }}"]
  metricsets: ["dbstats", "status"]
  username: {{ mongodb['mongo-data']['admin']['user'] }}
  password: {{ mongodb['mongo-data']['admin']['password'] }}
  period: {{ metricbeat.mongodb.period }}s
{% endif %}