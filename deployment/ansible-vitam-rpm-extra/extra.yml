---

# Vitam solution deployment
- hosts: vitam
  roles:
    - topbeat

- hosts: vitam
  roles:
     - {role: packetbeat, when: "ansible_virtualization_type != 'docker'"}

- hosts: vitam
  roles:
    - vitam_browser

- hosts: hosts-mongo-express
  roles:
    - {role: mongo-express, when: "ansible_virtualization_type != 'docker'"}

- hosts: library
  roles:
    - {role: vitam, vitam_component: library, java_args: /vitam/conf/library/library.conf, port_http: "{{vitam_library_port}}", secret_platform: "false" } 

- hosts: hosts-ihm-recette
  roles:
    - {role: vitam, vitam_component: ihm-recette,java_args: /vitam/conf/ihm-recette/ihm-recette.conf, port_http: "{{vitam_ihm_recette_port}}", secret_platform: "false", cluster_name: elasticsearch-data }
    - soapui_get_tests

- hosts: reverse
  roles:
    - reverse
