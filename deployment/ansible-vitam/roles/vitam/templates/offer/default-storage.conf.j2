
provider: {{ vitam_offers[offer_conf]["provider"] }}

{% if vitam_offers[offer_conf]["provider"] in ["filesystem","filesystem-hash"] %}
storagePath: {{vitam_folder_data}}
{% endif %}

{% if vitam_offers[offer_conf]["provider"] in ["openstack-swift","openstack-swift-v2","openstack-swift-v3"] %}
swiftKeystoneAuthUrl: {{ vitam_offers[offer_conf]["swiftKeystoneAuthUrl"] | default("") }}
swiftDomain: {{ vitam_offers[offer_conf]["swiftDomain"] | default("") }}
swiftProjectName: {{ vitam_offers[offer_conf]["swiftProjectName"] | default("") }}
swiftUser: {{ vitam_offers[offer_conf]["swiftUser"] | default("") }}
swiftPassword: {{ vitam_offers[offer_conf]["swiftPassword"] | default("") }}
swiftUrl: {{ vitam_offers[offer_conf]["swiftUrl"] | default("") }}
swiftTrustStore: {{vitam_folder_conf}}/truststore_{{ vitam_struct.vitam_component }}.jks
swiftTrustStorePassword: {{ password_truststore }}
swiftMaxConnectionsPerRoute: {{ vitam_offers[offer_conf]["swiftMaxConnectionsPerRoute"] | default(200) }}
swiftMaxConnections: {{ vitam_offers[offer_conf]["swiftMaxConnections"] | default(1000) }}
swiftConnectionTimeout: {{ vitam_offers[offer_conf]["swiftConnectionTimeout"] | default(200000) }}
swiftReadTimeout: {{ vitam_offers[offer_conf]["swiftReadTimeout"] | default(200000) }}
swiftHardRenewTokenDelayBeforeExpireTime: {{ vitam_offers[offer_conf]["swiftHardRenewTokenDelayBeforeExpireTime"] | default(60) }}
swiftSoftRenewTokenDelayBeforeExpireTime: {{ vitam_offers[offer_conf]["swiftSoftRenewTokenDelayBeforeExpireTime"] | default(300) }}
{% endif %}

{% if vitam_offers[offer_conf]["provider"] == "amazon-s3-v1" %}
s3RegionName: {{ vitam_offers[offer_conf]["s3RegionName"] }}
s3Endpoint: {{ vitam_offers[offer_conf]["s3Endpoint"] }}
s3AccessKey: {{ vitam_offers[offer_conf]["s3AccessKey"] }}
s3SecretKey: {{ vitam_offers[offer_conf]["s3SecretKey"] }}
s3PathStyleAccessEnabled: {{ vitam_offers[offer_conf]["s3PathStyleAccessEnabled"] | default(true) }}
s3SignerType: {{ vitam_offers[offer_conf]["s3SignerType"] | default("") }}
s3MaxConnections: {{ vitam_offers[offer_conf]["s3MaxConnections"] | default(50) }}
s3ConnectionTimeout: {{ vitam_offers[offer_conf]["s3ConnectionTimeout"] | default(10000) }}
s3SocketTimeout: {{ vitam_offers[offer_conf]["s3SocketTimeout"] | default(50000) }}
s3RequestTimeout: {{ vitam_offers[offer_conf]["s3RequestTimeout"] | default(0) }}
s3ClientExecutionTimeout: {{ vitam_offers[offer_conf]["s3ClientExecutionTimeout"] | default(0) }}
s3TrustStore: {{vitam_folder_conf}}/truststore_{{ vitam_struct.vitam_component }}.jks
s3TrustStorePassword: {{ password_truststore }}
{% endif %}

{% if vitam_offers[offer_conf]["provider"] in ["tape-library"] %}
tapeLibraryConfiguration:
  inputFileStorageFolder: "{{ vitam_folder_data }}/offer/inputFiles"
  inputTarStorageFolder: "{{ vitam_folder_data }}/offer/inputTars"
  outputTarStorageFolder: "{{ vitam_folder_data }}/offer/outputTars"
  maxTarEntrySize: 100000
  maxTarFileSize: 1000000
  useSudo: false

  topology:
    buckets:
      test:
        tenants: [0]
        tarBufferingTimeoutInMinutes: 60
      admin:
        tenants: [1]
        tarBufferingTimeoutInMinutes: 60
      prod:
        tenants: [2,3,4,5,6,7,8,9]
        tarBufferingTimeoutInMinutes: 60

  tapeLibraries:
    TAPE_LIB_1:
      robots:
        -
          device: /dev/tape/by-id/scsi-1QUANTUM_10F73224E6664C84A1D00000
          mtxPath: "/usr/sbin/mtx"
          timeoutInMilliseconds: 3600000
      drives:
        -
          index: 0
          device: /dev/tape/by-id/scsi-1IBM_ULT3580-TD6_1235308739-nst
          mtPath: "/bin/mt"
          ddPath: "/bin/dd"
          tarPath: "/bin/tar"
          timeoutInMilliseconds: 3600000
        -
          index: 1
          device: /dev/tape/by-id/scsi-1IBM_ULT3580-TD6_0951859786-nst
          mtPath: "/bin/mt"
          ddPath: "/bin/dd"
          tarPath: "/bin/tar"
          timeoutInMilliseconds: 3600000
        -
          index: 2
          device: /dev/tape/by-id/scsi-1IBM_ULT3580-TD6_0269493808-nst
          mtPath: "/bin/mt"
          ddPath: "/bin/dd"
          tarPath: "/bin/tar"
          timeoutInMilliseconds: 3600000
        -
          index: 3
          device: /dev/tape/by-id/scsi-1IBM_ULT3580-TD6_0566471858-nst
          mtPath: "/bin/mt"
          ddPath: "/bin/dd"
          tarPath: "/bin/tar"
          timeoutInMilliseconds: 3600000
{% endif %}