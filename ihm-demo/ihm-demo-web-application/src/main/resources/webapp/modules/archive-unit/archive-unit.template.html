<div class="header">
  <div class="col-md-12">
    <h1>Formulaire de l'Archive Unit {{$ctrl.archiveId}}</h1>
    <button class="btn btn-primary pull-right active btn-sm btn-form" ng-model="isEdit" ng-init="isEdit=false" ng-click="isEdit=!isEdit">Edit</button>
  </div>
</div>

<div class="container-fluid unit-form">
  <div class="row">
    <div class="col-xs-12">
      <script type="text/ng-template" id="fieldTree">

        <!-- Simple Field -->
        <div class="row simple-field" ng-if="fieldSet.typeF!=='P' && fieldSet.isChild==false">
          <div class="col-md-1">
            <button type="button" class="btn btn-sm" aria-label="Left Align" ng-if="fieldSet.fieldName!=='ID'" ng-model="fieldSet.isFieldEdit"
                    ng-init="fieldSet.isFieldEdit=false" ng-click="fieldSet.isFieldEdit=!fieldSet.isFieldEdit">
              <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
            </button>
          </div>
          <div>
            <div class="col-md-5"><label class="label label-primary">{{fieldSet.fieldName}}</label></div>
            <div class="col-md-1"><label>:</label></div>
            <div class="col-md-3">
              <input type="text" ng-model=fieldSet.fieldValue ng-init=fieldSet.fieldValue ng-if="fieldSet.typeF!=='P' && (isEdit||fieldSet.isFieldEdit)
                  && fieldSet.fieldName!=='ID'"></input>
              <label ng-if="fieldSet.typeF!=='P' && ((!isEdit && !fieldSet.isFieldEdit)||fieldSet.fieldName=='ID')">{{fieldSet.fieldValue}}</label>
            </div>
          </div>
        </div>

        <div class ="col-xs-12 col-md-4" ng-if="fieldSet.typeF!=='P' && fieldSet.isChild==true">
              <div class="col-md-1">
                <button type="button" class="btn btn-sm" aria-label="Left Align" ng-if="fieldSet.fieldName!=='ID'" ng-model="fieldSet.isFieldEdit"
                  ng-init="fieldSet.isFieldEdit=false" ng-click="fieldSet.isFieldEdit=!fieldSet.isFieldEdit">
                  <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
                </button>
              </div>
              <div class="col-md-5"><label class="label label-primary">{{fieldSet.fieldName}}</label></div>
              <div class="col-md-1"><label>:</label></div>
              <div class="col-md-3">
                <input type="text" ng-model=fieldSet.fieldValue ng-init=fieldSet.fieldValue ng-if="fieldSet.typeF!=='P' && (isEdit||fieldSet.isFieldEdit)
                && fieldSet.fieldName!=='ID'"></input>
                <label ng-if="fieldSet.typeF!=='P' && ((!isEdit && !fieldSet.isFieldEdit)||fieldSet.fieldName=='ID')">{{fieldSet.fieldValue}}</label>
              </div>
        </div>

        <!-- Complex field -->
        <div ng-if="fieldSet.typeF=='P'"  class="complex-field">
          <uib-accordion>
            <uib-accordion-group heading="{{fieldSet.fieldName}}" panel-class="panel-info">
              <div ng-repeat="fieldSet in fieldSet.content" ng-include="'fieldTree'"></div>
            </uib-accordion-group>
          </uib-accordion>
        </div>
      </script>

      <div class="{{fieldSet.typeF !=='P'?'col-xs-12 col-md-4': 'col-xs-12 col-md-12'}}" ng-repeat="fieldSet in $ctrl.archiveArray" ng-include="'fieldTree'"></div>
    </div>
  </div>
</div>
