/*
 * Copyright French Prime minister Office/SGMAP/DINSIC/Vitam Program (2015-2020)
 *
 * contact.vitam@culture.gouv.fr
 *
 * This software is a computer program whose purpose is to implement a digital archiving back-office system managing
 * high volumetry securely and efficiently.
 *
 * This software is governed by the CeCILL 2.1 license under French law and abiding by the rules of distribution of free
 * software. You can use, modify and/ or redistribute the software under the terms of the CeCILL 2.1 license as
 * circulated by CEA, CNRS and INRIA at the following URL "http://www.cecill.info".
 *
 * As a counterpart to the access to the source code and rights to copy, modify and redistribute granted by the license,
 * users are provided only with a limited warranty and the software's author, the holder of the economic rights, and the
 * successive licensors have only limited liability.
 *
 * In this respect, the user's attention is drawn to the risks associated with loading, using, modifying and/or
 * developing or reproducing the software by the user in light of its specific status of free software, that may mean
 * that it is complicated to manipulate, and that also therefore means that it is reserved for developers and
 * experienced professionals having in-depth computer knowledge. Users are therefore encouraged to load and test the
 * software's suitability as regards their requirements in conditions enabling the security of their systems and/or data
 * to be ensured and, more generally, to use and operate it in the same conditions as regards security.
 *
 * The fact that you are presently reading this means that you have had knowledge of the CeCILL 2.1 license and that you
 * accept its terms.
 */

package fr.gouv.vitam.worker.core.plugin.preservation;

import fr.gouv.vitam.batch.report.model.PreservationStatus;
import fr.gouv.vitam.common.VitamConfiguration;
import fr.gouv.vitam.common.model.ItemStatus;
import fr.gouv.vitam.common.model.administration.ActionTypePreservation;
import fr.gouv.vitam.processing.common.exception.ProcessingException;
import fr.gouv.vitam.worker.common.HandlerIO;
import fr.gouv.vitam.worker.core.plugin.preservation.model.ExtractedMetadataForAu;
import fr.gouv.vitam.worker.core.plugin.preservation.model.OutputPreservation;
import fr.gouv.vitam.worker.core.plugin.preservation.model.WorkflowBatchResult;
import fr.gouv.vitam.worker.core.plugin.preservation.model.WorkflowBatchResult.OutputExtra;
import fr.gouv.vitam.worker.core.plugin.preservation.model.WorkflowBatchResults;
import org.apache.commons.lang.StringEscapeUtils;
import org.junit.Before;
import org.junit.Test;

import java.nio.file.Paths;
import java.util.Collections;
import java.util.List;
import java.util.Optional;

import static fr.gouv.vitam.common.model.StatusCode.WARNING;
import static fr.gouv.vitam.worker.core.plugin.preservation.PreservationTesseractPlugin.TEXT_CONTENT;
import static org.assertj.core.api.Assertions.assertThat;
import static org.junit.Assert.assertEquals;
import static org.junit.Assert.assertTrue;

public class PreservationTesseractPluginTest {

    private static final String TESSERACT_OUTPUT =
        "Je possedera as puissions ai tangibles au. Remarquait mal atteignait peu sol infiniment mur. Fille va levee rangs va neige en au poing. Seulement gaillards oh ah corbeille. Ans fourneaux ici que ressemble gachettes incapable. Un pere lors on fins ah pois. Car inoui masse eut loups canif betes sorte ces. Son grille net ombres mollir non gronde pareil but jardin. Subitement nid crispation nos fraternite arriverent. Vie corons jet gauche durcis des nouent doigts brumes nul. Voie et pois te chez. Suis tant va doit il bras ca. Verdure que ces attendu conclue chatoie qui. Avancaient fut ses enveloppes des non infanterie vieillards. Au quelques parterre ma tournent philippe on il attelage. Je possedera as puissions ai tangibles au. Remarquait mal atteignait peu sol infiniment mur. Fille va levee rangs va neige en au poing. Seulement gaillards oh ah corbeille. Ans fourneaux ici que ressemble gachettes incapable. Un pere lors on fins ah pois. Car inoui masse eut loups canif betes sorte ces. Son grille net ombres mollir non gronde pareil but jardin. Subitement nid crispation nos fraternite arriverent. Vie corons jet gauche durcis des nouent doigts brumes nul. Voie et pois te chez. Suis tant va doit il bras ca. Verdure que ces attendu conclue chatoie qui. Avancaient fut ses enveloppes des non infanterie vieillards. Au quelques parterre ma tournent philippe on il attelage. Prit or fond poil gens dont tu va la. Ifs laissons philippe oui quarante havresac nez. Aux legerement condamnait renferment des sur souhaitait. Esplanade causaient tarderait que foi repousser. Clairieres avancaient bleuissent ces jet vit. Travers donjons rit eue art semence propice. Pas fit voit une cela paix ange. Les comprendre ame fer frequentes executeurs caracolent. Contree retient en tu revetit dociles. Sa du aussi aimer vingt subit pieds voila. Ils poussait mamelons oui arrivera par. Car nid bete vrai peu toi mais. Ebloui poteau he on ah autant. Seulement ont sentiment quiconque fin peu nos. Poussaient pic tricolores dur arriverent peu lumineuses eclaireurs. Effrayant possedera fin entourage servantes bas art tarderait toi. Pareil ils par vin croire lorsqu fer gronde. Est effrayant jeu fer meconnais caractere quiconque. Poing inoui de abris neige ah arbre. Sais ni en plus avec abat elle. Radieuse ouvertes de premiers quelques ma. As menions sourire express on et changea extreme la. Le pu reve ne abat rire vint joie long. Le canif outre va il on annee. Cet ses pour ruer gens chez dela murs non. Car ans puisque caillou blanche ete ame. Menent balcon chemin nos douane sur. Repousser sacrifiez car distribua citadelle attardent iii vif divergent. Ans entiere ici toi touffes apparat. Ma venu puis plus il. Rien cent va nuit je oh pays. Ras adorer touffe beaute peu ans. Ont trouve aux les ifs parees gronde. Faite armes nul garde sur elles court. Caractere oui viendrait vin accoudees tot certitude. Est ont aux vieillards patiemment republique bouquetins estaminets. Cassait oh dragons ce abattre me. Blancs vin soeurs autres non menent paquet gronde. Et joue seul tu plus. Je la donc veut avez on quoi. Historique bouquetins oh oh poussaient inattendus retrouvait qu. Les descendons assurances pressentit sanctifier remplirent iii compassion. Universel regardent que les prenaient aux massacrer ont. Ils fer electrique sol singuliers cet paraissent. Certains arrivera trophees but vin pas couleurs touchera. Me marmelade epaissies printemps me un la instruite. On digues jeunes la sortit ronfle appela grille. Quand amour carre coeur ete verts vin point toi. Embrassa me donnerai quittent ah un barbares jeterent societes. Encontre il retablir en trouvait ah la. Prime aides eau haine ont des force jet. Pieds desir entre je la patre seule utile. Sortie il ce naitre pleins en canons blason. Iii imprudente nationales frissonner hurlements ete chantaient remarquait. Beffroi conflit cuivres but jeu. Lui neuve essor babil brave son par. Entendu escorte les eclairs eue attendu douleur. Vif singuliers ame frequentes pressaient. Poternes empilait se reposoir epanouir promptes etendues de. Trois poids parmi dites garni on la. Habilement on petitement sa ca claquaient ecouterent. Tristes sur dessert epouses longues rit allaite pouvons une. Pressentit hurlements son ici instrument des. Chose drape faire son iii mille cette enfin. Etendues sur blanches appareil non laissons une reprises qui. Si ne peuple troupe me paquet gauche mouche marche. Je possedera as puissions ai tangibles au. Remarquait mal atteignait peu sol infiniment mur. Fille va levee rangs va neige en au poing. Seulement gaillards oh ah corbeille. Ans fourneaux ici que ressemble gachettes incapable. Un pere lors on fins ah pois. Car inoui masse eut loups canif betes sorte ces. Son grille net ombres mollir non gronde pareil but jardin. Subitement nid crispation nos fraternite arriverent. Vie corons jet gauche durcis des nouent doigts brumes nul. Voie et pois te chez. Suis tant va doit il bras ca. Verdure que ces attendu conclue chatoie qui. Avancaient fut ses enveloppes des non infanterie vieillards. Au quelques parterre ma tournent philippe on il attelage. Prit or fond poil gens dont tu va la. Ifs laissons philippe oui quarante havresac nez. Aux legerement condamnait renferment des sur souhaitait. Esplanade causaient tarderait que foi repousser. Clairieres avancaient bleuissent ces jet vit. Travers donjons rit eue art semence propice. Pas fit voit une cela paix ange. Les comprendre ame fer frequentes executeurs caracolent. Contree retient en tu revetit dociles. Sa du aussi aimer vingt subit pieds voila. Ils poussait mamelons oui arrivera par. Car nid bete vrai peu toi mais. Ebloui poteau he on ah autant. Seulement ont sentiment quiconque fin peu nos. Poussaient pic tricolores dur arriverent peu lumineuses eclaireurs. Effrayant possedera fin entourage servantes bas art tarderait toi. Pareil ils par vin croire lorsqu fer gronde. Est effrayant jeu fer meconnais caractere quiconque. Poing inoui de abris neige ah arbre. Sais ni en plus avec abat elle. Radieuse ouvertes de premiers quelques ma. As menions sourire express on et changea extreme la. Le pu reve ne abat rire vint joie long. Le canif outre va il on annee. Cet ses pour ruer gens chez dela murs non. Car ans puisque caillou blanche ete ame. Menent balcon chemin nos douane sur. Repousser sacrifiez car distribua citadelle attardent iii vif divergent. Ans entiere ici toi touffes apparat. Ma venu puis plus il. Rien cent va nuit je oh pays. Ras adorer touffe beaute peu ans. Ont trouve aux les ifs parees gronde. Faite armes nul garde sur elles court. Caractere oui viendrait vin accoudees tot certitude. Est ont aux vieillards patiemment republique bouquetins estaminets. Cassait oh dragons ce abattre me. Blancs vin soeurs autres non menent paquet gronde. Et joue seul tu plus. Je la donc veut avez on quoi. Historique bouquetins oh oh poussaient inattendus retrouvait qu. Les descendons assurances pressentit sanctifier remplirent iii compassion. Universel regardent que les prenaient aux massacrer ont. Ils fer electrique sol singuliers cet paraissent. Certains arrivera trophees but vin pas couleurs touchera. Me marmelade epaissies printemps me un la instruite. On digues jeunes la sortit ronfle appela grille. Quand amour carre coeur ete verts vin point toi. Embrassa me donnerai quittent ah un barbares jeterent societes. Encontre il retablir en trouvait ah la. Prime aides eau haine ont des force jet. Pieds desir entre je la patre seule utile. Sortie il ce naitre pleins en canons blason. Iii imprudente nationales frissonner hurlements ete chantaient remarquait. Beffroi conflit cuivres but jeu. Lui neuve essor babil brave son par. Entendu escorte les eclairs eue attendu douleur. Vif singuliers ame frequentes pressaient. Poternes empilait se reposoir epanouir promptes etendues de. Trois poids parmi dites garni on la. Habilement on petitement sa ca claquaient ecouterent. Tristes sur dessert epouses longues rit allaite pouvons une. Pressentit hurlements son ici instrument des. Chose drape faire son iii mille cette enfin. Etendues sur blanches appareil non laissons une reprises qui. Si ne peuple troupe me paquet gauche mouche marche. Je possedera as puissions ai tangibles au. Remarquait mal atteignait peu sol infiniment mur. Fille va levee rangs va neige en au poing. Seulement gaillards oh ah corbeille. Ans fourneaux ici que ressemble gachettes incapable. Un pere lors on fins ah pois. Car inoui masse eut loups canif betes sorte ces. Son grille net ombres mollir non gronde pareil but jardin. Subitement nid crispation nos fraternite arriverent. Vie corons jet gauche durcis des nouent doigts brumes nul. Voie et pois te chez. Suis tant va doit il bras ca. Verdure que ces attendu conclue chatoie qui. Avancaient fut ses enveloppes des non infanterie vieillards. Au quelques parterre ma tournent philippe on il attelage. Prit or fond poil gens dont tu va la. Ifs laissons philippe oui quarante havresac nez. Aux legerement condamnait renferment des sur souhaitait. Esplanade causaient tarderait que foi repousser. Clairieres avancaient bleuissent ces jet vit. Travers donjons rit eue art semence propice. Pas fit voit une cela paix ange. Les comprendre ame fer frequentes executeurs caracolent. Contree retient en tu revetit dociles. Sa du aussi aimer vingt subit pieds voila. Ils poussait mamelons oui arrivera par. Car nid bete vrai peu toi mais. Ebloui poteau he on ah autant. Seulement ont sentiment quiconque fin peu nos. Poussaient pic tricolores dur arriverent peu lumineuses eclaireurs. Effrayant possedera fin entourage servantes bas art tarderait toi. Pareil ils par vin croire lorsqu fer gronde. Est effrayant jeu fer meconnais caractere quiconque. Poing inoui de abris neige ah arbre. Sais ni en plus avec abat elle. Radieuse ouvertes de premiers quelques ma. As menions sourire express on et changea extreme la. Le pu reve ne abat rire vint joie long. Le canif outre va il on annee. Cet ses pour ruer gens chez dela murs non. Car ans puisque caillou blanche ete ame. Menent balcon chemin nos douane sur. Repousser sacrifiez car distribua citadelle attardent iii vif divergent. Ans entiere ici toi touffes apparat. Ma venu puis plus il. Rien cent va nuit je oh pays. Ras adorer touffe beaute peu ans. Ont trouve aux les ifs parees gronde. Faite armes nul garde sur elles court. Caractere oui viendrait vin accoudees tot certitude. Est ont aux vieillards patiemment republique bouquetins estaminets. Cassait oh dragons ce abattre me. Blancs vin soeurs autres non menent paquet gronde. Et joue seul tu plus. Je la donc veut avez on quoi. Historique bouquetins oh oh poussaient inattendus retrouvait qu. Les descendons assurances pressentit sanctifier remplirent iii compassion. Universel regardent que les prenaient aux massacrer ont. Ils fer electrique sol singuliers cet paraissent. Certains arrivera trophees but vin pas couleurs touchera. Me marmelade epaissies printemps me un la instruite. On digues jeunes la sortit ronfle appela grille. Quand amour carre coeur ete verts vin point toi. Embrassa me donnerai quittent ah un barbares jeterent societes. Encontre il retablir en trouvait ah la. Prime aides eau haine ont des force jet. Pieds desir entre je la patre seule utile. Sortie il ce naitre pleins en canons blason. Iii imprudente nationales frissonner hurlements ete chantaient remarquait. Beffroi conflit cuivres but jeu. Lui neuve essor babil brave son par. Entendu escorte les eclairs eue attendu douleur. Vif singuliers ame frequentes pressaient. Poternes empilait se reposoir epanouir promptes etendues de. Trois poids parmi dites garni on la. Habilement on petitement sa ca claquaient ecouterent. Tristes sur dessert epouses longues rit allaite pouvons une. Pressentit hurlements son ici instrument des. Chose drape faire son iii mille cette enfin. Etendues sur blanches appareil non laissons une reprises qui. Si ne peuple troupe me paquet gauche mouche marche. Je possedera as puissions ai tangibles au. Remarquait mal atteignait peu sol infiniment mur. Fille va levee rangs va neige en au poing. Seulement gaillards oh ah corbeille. Ans fourneaux ici que ressemble gachettes incapable. Un pere lors on fins ah pois. Car inoui masse eut loups canif betes sorte ces. Son grille net ombres mollir non gronde pareil but jardin. Subitement nid crispation nos fraternite arriverent. Vie corons jet gauche durcis des nouent doigts brumes nul. Voie et pois te chez. Suis tant va doit il bras ca. Verdure que ces attendu conclue chatoie qui. Avancaient fut ses enveloppes des non infanterie vieillards. Au quelques parterre ma tournent philippe on il attelage. Prit or fond poil gens dont tu va la. Ifs laissons philippe oui quarante havresac nez. Aux legerement condamnait renferment des sur souhaitait. Esplanade causaient tarderait que foi repousser. Clairieres avancaient bleuissent ces jet vit. Travers donjons rit eue art semence propice. Pas fit voit une cela paix ange. Les comprendre ame fer frequentes executeurs caracolent. Contree retient en tu revetit dociles. Sa du aussi aimer vingt subit pieds voila. Ils poussait mamelons oui arrivera par. Car nid bete vrai peu toi mais. Ebloui poteau he on ah autant. Seulement ont sentiment quiconque fin peu nos. Poussaient pic tricolores dur arriverent peu lumineuses eclaireurs. Effrayant possedera fin entourage servantes bas art tarderait toi. Pareil ils par vin croire lorsqu fer gronde. Est effrayant jeu fer meconnais caractere quiconque. Poing inoui de abris neige ah arbre. Sais ni en plus avec abat elle. Radieuse ouvertes de premiers quelques ma. As menions sourire express on et changea extreme la. Le pu reve ne abat rire vint joie long. Le canif outre va il on annee. Cet ses pour ruer gens chez dela murs non. Car ans puisque caillou blanche ete ame. Menent balcon chemin nos douane sur. Repousser sacrifiez car distribua citadelle attardent iii vif divergent. Ans entiere ici toi touffes apparat. Ma venu puis plus il. Rien cent va nuit je oh pays. Ras adorer touffe beaute peu ans. Ont trouve aux les ifs parees gronde. Faite armes nul garde sur elles court. Caractere oui viendrait vin accoudees tot certitude. Est ont aux vieillards patiemment republique bouquetins estaminets. Cassait oh dragons ce abattre me. Blancs vin soeurs autres non menent paquet gronde. Et joue seul tu plus. Je la donc veut avez on quoi. Historique bouquetins oh oh poussaient inattendus retrouvait qu. Les descendons assurances pressentit sanctifier remplirent iii compassion. Universel regardent que les prenaient aux massacrer ont. Ils fer electrique sol singuliers cet paraissent. Certains arrivera trophees but vin pas couleurs touchera. Me marmelade epaissies printemps me un la instruite. On digues jeunes la sortit ronfle appela grille. Quand amour carre coeur ete verts vin point toi. Embrassa me donnerai quittent ah un barbares jeterent societes. Encontre il retablir en trouvait ah la. Prime aides eau haine ont des force jet. Pieds desir entre je la patre seule utile. Sortie il ce naitre pleins en canons blason. Iii imprudente nationales frissonner hurlements ete chantaient remarquait. Beffroi conflit cuivres but jeu. Lui neuve essor babil brave son par. Entendu escorte les eclairs eue attendu douleur. Vif singuliers ame frequentes pressaient. Poternes empilait se reposoir epanouir promptes etendues de. Trois poids parmi dites garni on la. Habilement on petitement sa ca claquaient ecouterent. Tristes sur dessert epouses longues rit allaite pouvons une. Pressentit hurlements son ici instrument des. Chose drape faire son iii mille cette enfin. Etendues sur blanches appareil non laissons une reprises qui. Si ne peuple troupe me paquet gauche mouche marche. Prit or fond poil gens dont tu va la. Ifs laissons philippe oui quarante havresac nez. Aux legerement condamnait renferment des sur souhaitait. Esplanade causaient tarderait que foi repousser. Clairieres avancaient bleuissent ces jet vit. Travers donjons rit eue art semence propice. Pas fit voit une cela paix ange. Les comprendre ame fer frequentes executeurs caracolent. Contree retient en tu revetit dociles. Sa du aussi aimer vingt subit pieds voila. Ils poussait mamelons oui arrivera par. Car nid bete vrai peu toi mais. Ebloui poteau he on ah autant. Seulement ont sentiment quiconque fin peu nos. Poussaient pic tricolores dur arriverent peu lumineuses eclaireurs. Effrayant possedera fin entourage servantes bas art tarderait toi. Pareil ils par vin croire lorsqu fer gronde. Est effrayant jeu fer meconnais caractere quiconque. Poing inoui de abris neige ah arbre. Sais ni en plus avec abat elle. Radieuse ouvertes de premiers quelques ma. As menions sourire express on et changea extreme la. Le pu reve ne abat rire vint joie long. Le canif outre va il on annee. Cet ses pour ruer gens chez dela murs non. Car ans puisque caillou blanche ete ame. Menent balcon chemin nos douane sur. Repousser sacrifiez car distribua citadelle attardent iii vif divergent. Ans entiere ici toi touffes apparat. Ma venu puis plus il. Rien cent va nuit je oh pays. Ras adorer touffe beaute peu ans. Ont trouve aux les ifs parees gronde. Faite armes nul garde sur elles court. Caractere oui viendrait vin accoudees tot certitude. Est ont aux vieillards patiemment republique bouquetins estaminets. Cassait oh dragons ce abattre me. Blancs vin soeurs autres non menent paquet gronde. Et joue seul tu plus. Je la donc veut avez on quoi. Historique bouquetins oh oh poussaient inattendus retrouvait qu. Les descendons assurances pressentit sanctifier remplirent iii compassion. Universel regardent que les prenaient aux massacrer ont. Ils fer electrique sol singuliers cet paraissent. Certains arrivera trophees but vin pas couleurs touchera. Me marmelade epaissies printemps me un la instruite. On digues jeunes la sortit ronfle appela grille. Quand amour carre coeur ete verts vin point toi. Embrassa me donnerai quittent ah un barbares jeterent societes. Encontre il retablir en trouvait ah la. Prime aides eau haine ont des force jet. Pieds desir entre je la patre seule utile. Sortie il ce naitre pleins en canons blason. Iii imprudente nationales frissonner hurlements ete chantaient remarquait. Beffroi conflit cuivres but jeu. Lui neuve essor babil brave son par. Entendu escorte les eclairs eue attendu douleur. Vif singuliers ame frequentes pressaient. Poternes empilait se reposoir epanouir promptes etendues de. Trois poids parmi dites garni on la. Habilement on petitement sa ca claquaient ecouterent. Tristes sur dessert epouses longues rit allaite pouvons une. Pressentit hurlements son ici instrument des. Chose drape faire son iii mille cette enfin. Etendues sur blanches appareil non laissons une reprises qui. Si ne peuple troupe me paquet gauche mouche marche. Je possedera as puissions ai tangibles au. Remarquait mal atteignait peu sol infiniment mur. Fille va levee rangs va neige en au poing. Seulement gaillards oh ah corbeille. Ans fourneaux ici que ressemble gachettes incapable. Un pere lors on fins ah pois. Car inoui masse eut loups canif betes sorte ces. Son grille net ombres mollir non gronde pareil but jardin. Subitement nid crispation nos fraternite arriverent. Vie corons jet gauche durcis des nouent doigts brumes nul. Voie et pois te chez. Suis tant va doit il bras ca. Verdure que ces attendu conclue chatoie qui. Avancaient fut ses enveloppes des non infanterie vieillards. Au quelques parterre ma tournent philippe on il attelage. Je possedera as puissions ai tangibles au. Remarquait mal atteignait peu sol infiniment mur. Fille va levee rangs va neige en au poing. Seulement gaillards oh ah corbeille. Ans fourneaux ici que ressemble gachettes incapable. Un pere lors on fins ah pois. Car inoui masse eut loups canif betes sorte ces. Son grille net ombres mollir non gronde pareil but jardin. Subitement nid crispation nos fraternite arriverent. Vie corons jet gauche durcis des nouent doigts brumes nul. Voie et pois te chez. Suis tant va doit il bras ca. Verdure que ces attendu conclue chatoie qui. Avancaient fut ses enveloppes des non infanterie vieillards. Au quelques parterre ma tournent philippe on il attelage. Prit or fond poil gens dont tu va la. Ifs laissons philippe oui quarante havresac nez. Aux legerement condamnait renferment des sur souhaitait. Esplanade causaient tarderait que foi repousser. Clairieres avancaient bleuissent ces jet vit. Travers donjons rit eue art semence propice. Pas fit voit une cela paix ange. Les comprendre ame fer frequentes executeurs caracolent. Contree retient en tu revetit dociles. Sa du aussi aimer vingt subit pieds voila. Ils poussait mamelons oui arrivera par. Car nid bete vrai peu toi mais. Ebloui poteau he on ah autant. Seulement ont sentiment quiconque fin peu nos. Poussaient pic tricolores dur arriverent peu lumineuses eclaireurs. Effrayant possedera fin entourage servantes bas art tarderait toi. Pareil ils par vin croire lorsqu fer gronde. Est effrayant jeu fer meconnais caractere quiconque. Poing inoui de abris neige ah arbre. Sais ni en plus avec abat elle. Radieuse ouvertes de premiers quelques ma. As menions sourire express on et changea extreme la. Le pu reve ne abat rire vint joie long. Le canif outre va il on annee. Cet ses pour ruer gens chez dela murs non. Car ans puisque caillou blanche ete ame. Menent balcon chemin nos douane sur. Repousser sacrifiez car distribua citadelle attardent iii vif divergent. Ans entiere ici toi touffes apparat. Ma venu puis plus il. Rien cent va nuit je oh pays. Ras adorer touffe beaute peu ans. Ont trouve aux les ifs parees gronde. Faite armes nul garde sur elles court. Caractere oui viendrait vin accoudees tot certitude. Est ont aux vieillards patiemment republique bouquetins estaminets. Cassait oh dragons ce abattre me. Blancs vin soeurs autres non menent paquet gronde. Et joue seul tu plus. Je la donc veut avez on quoi. Historique bouquetins oh oh poussaient inattendus retrouvait qu. Les descendons assurances pressentit sanctifier remplirent iii compassion. Universel regardent que les prenaient aux massacrer ont. Ils fer electrique sol singuliers cet paraissent. Certains arrivera trophees but vin pas couleurs touchera. Me marmelade epaissies printemps me un la instruite. On digues jeunes la sortit ronfle appela grille. Quand amour carre coeur ete verts vin point toi. Embrassa me donnerai quittent ah un barbares jeterent societes. Encontre il retablir en trouvait ah la. Prime aides eau haine ont des force jet. Pieds desir entre je la patre seule utile. Sortie il ce naitre pleins en canons blason. Iii imprudente nationales frissonner hurlements ete chantaient remarquait. Beffroi conflit cuivres but jeu. Lui neuve essor babil brave son par. Entendu escorte les eclairs eue attendu douleur. Vif singuliers ame frequentes pressaient. Poternes empilait se reposoir epanouir promptes etendues de. Trois poids parmi dites garni on la. Habilement on petitement sa ca claquaient ecouterent. Tristes sur dessert epouses longues rit allaite pouvons une. Pressentit hurlements son ici instrument des. Chose drape faire son iii mille cette enfin. Etendues sur blanches appareil non laissons une reprises qui. Si ne peuple troupe me paquet gauche mouche marche. Je possedera as puissions ai tangibles au. Remarquait mal atteignait peu sol infiniment mur. Fille va levee rangs va neige en au poing. Seulement gaillards oh ah corbeille. Ans fourneaux ici que ressemble gachettes incapable. Un pere lors on fins ah pois. Car inoui masse eut loups canif betes sorte ces. Son grille net ombres mollir non gronde pareil but jardin. Subitement nid crispation nos fraternite arriverent. Vie corons jet gauche durcis des nouent doigts brumes nul. Voie et pois te chez. Suis tant va doit il bras ca. Verdure que ces attendu conclue chatoie qui. Avancaient fut ses enveloppes des non infanterie vieillards. Au quelques parterre ma tournent philippe on il attelage. Prit or fond poil gens dont tu va la. Ifs laissons philippe oui quarante havresac nez. Aux legerement condamnait renferment des sur souhaitait. Esplanade causaient tarderait que foi repousser. Clairieres avancaient bleuissent ces jet vit. Travers donjons rit eue art semence propice. Pas fit voit une cela paix ange. Les comprendre ame fer frequentes executeurs caracolent. Contree retient en tu revetit dociles. Sa du aussi aimer vingt subit pieds voila. Ils poussait mamelons oui arrivera par. Car nid bete vrai peu toi mais. Ebloui poteau he on ah autant. Seulement ont sentiment quiconque fin peu nos. Poussaient pic tricolores dur arriverent peu lumineuses eclaireurs. Effrayant possedera fin entourage servantes bas art tarderait toi. Pareil ils par vin croire lorsqu fer gronde. Est effrayant jeu fer meconnais caractere quiconque. Poing inoui de abris neige ah arbre. Sais ni en plus avec abat elle. Radieuse ouvertes de premiers quelques ma. As menions sourire express on et changea extreme la. Le pu reve ne abat rire vint joie long. Le canif outre va il on annee. Cet ses pour ruer gens chez dela murs non. Car ans puisque caillou blanche ete ame. Menent balcon chemin nos douane sur. Repousser sacrifiez car distribua citadelle attardent iii vif divergent. Ans entiere ici toi touffes apparat. Ma venu puis plus il. Rien cent va nuit je oh pays. Ras adorer touffe beaute peu ans. Ont trouve aux les ifs parees gronde. Faite armes nul garde sur elles court. Caractere oui viendrait vin accoudees tot certitude. Est ont aux vieillards patiemment republique bouquetins estaminets. Cassait oh dragons ce abattre me. Blancs vin soeurs autres non menent paquet gronde. Et joue seul tu plus. Je la donc veut avez on quoi. Historique bouquetins oh oh poussaient inattendus retrouvait qu. Les descendons assurances pressentit sanctifier remplirent iii compassion. Universel regardent que les prenaient aux massacrer ont. Ils fer electrique sol singuliers cet paraissent. Certains arrivera trophees but vin pas couleurs touchera. Me marmelade epaissies printemps me un la instruite. On digues jeunes la sortit ronfle appela grille. Quand amour carre coeur ete verts vin point toi. Embrassa me donnerai quittent ah un barbares jeterent societes. Encontre il retablir en trouvait ah la. Prime aides eau haine ont des force jet. Pieds desir entre je la patre seule utile. Sortie il ce naitre pleins en canons blason. Iii imprudente nationales frissonner hurlements ete chantaient remarquait. Beffroi conflit cuivres but jeu. Lui neuve essor babil brave son par. Entendu escorte les eclairs eue attendu douleur. Vif singuliers ame frequentes pressaient. Poternes empilait se reposoir epanouir promptes etendues de. Trois poids parmi dites garni on la. Habilement on petitement sa ca claquaient ecouterent. Tristes sur dessert epouses longues rit allaite pouvons une. Pressentit hurlements son ici instrument des. Chose drape faire son iii mille cette enfin. Etendues sur blanches appareil non laissons une reprises qui. Si ne peuple troupe me paquet gauche mouche marche. Je possedera as puissions ai tangibles au. Remarquait mal atteignait peu sol infiniment mur. Fille va levee rangs va neige en au poing. Seulement gaillards oh ah corbeille. Ans fourneaux ici que ressemble gachettes incapable. Un pere lors on fins ah pois. Car inoui masse eut loups canif betes sorte ces. Son grille net ombres mollir non gronde pareil but jardin. Subitement nid crispation nos fraternite arriverent. Vie corons jet gauche durcis des nouent doigts brumes nul. Voie et pois te chez. Suis tant va doit il bras ca. Verdure que ces attendu conclue chatoie qui. Avancaient fut ses enveloppes des non infanterie vieillards. Au quelques parterre ma tournent philippe on il attelage. Prit or fond poil gens dont tu va la. Ifs laissons philippe oui quarante havresac nez. Aux legerement condamnait renferment des sur souhaitait. Esplanade causaient tarderait que foi repousser. Clairieres avancaient bleuissent ces jet vit. Travers donjons rit eue art semence propice. Pas fit voit une cela paix ange. Les comprendre ame fer frequentes executeurs caracolent. Contree retient en tu revetit dociles. Sa du aussi aimer vingt subit pieds voila. Ils poussait mamelons oui arrivera par. Car nid bete vrai peu toi mais. Ebloui poteau he on ah autant. Seulement ont sentiment quiconque fin peu nos. Poussaient pic tricolores dur arriverent peu lumineuses eclaireurs. Effrayant possedera fin entourage servantes bas art tarderait toi. Pareil ils par vin croire lorsqu fer gronde. Est effrayant jeu fer meconnais caractere quiconque. Poing inoui de abris neige ah arbre. Sais ni en plus avec abat elle. Radieuse ouvertes de premiers quelques ma. As menions sourire express on et changea extreme la. Le pu reve ne abat rire vint joie long. Le canif outre va il on annee. Cet ses pour ruer gens chez dela murs non. Car ans puisque caillou blanche ete ame. Menent balcon chemin nos douane sur. Repousser sacrifiez car distribua citadelle attardent iii vif divergent. Ans entiere ici toi touffes apparat. Ma venu puis plus il. Rien cent va nuit je oh pays. Ras adorer touffe beaute peu ans. Ont trouve aux les ifs parees gronde. Faite armes nul garde sur elles court. Caractere oui viendrait vin accoudees tot certitude. Est ont aux vieillards patiemment republique bouquetins estaminets. Cassait oh dragons ce abattre me. Blancs vin soeurs autres non menent paquet gronde. Et joue seul tu plus. Je la donc veut avez on quoi. Historique bouquetins oh oh poussaient inattendus retrouvait qu. Les descendons assurances pressentit sanctifier remplirent iii compassion. Universel regardent que les prenaient aux massacrer ont. Ils fer electrique sol singuliers cet paraissent. Certains arrivera trophees but vin pas couleurs touchera. Me marmelade epaissies printemps me un la instruite. On digues jeunes la sortit ronfle appela grille. Quand amour carre coeur ete verts vin point toi. Embrassa me donnerai quittent ah un barbares jeterent societes. Encontre il retablir en trouvait ah la. Prime aides eau haine ont des force jet. Pieds desir entre je la patre seule utile. Sortie il ce naitre pleins en canons blason. Iii imprudente nationales frissonner hurlements ete chantaient remarquait. Beffroi conflit cuivres but jeu. Lui neuve essor babil brave son par. Entendu escorte les eclairs eue attendu douleur. Vif singuliers ame frequentes pressaient. Poternes empilait se reposoir epanouir promptes etendues de. Trois poids parmi dites garni on la. Habilement on petitement sa ca claquaient ecouterent. Tristes sur dessert epouses longues rit allaite pouvons une. Pressentit hurlements son ici instrument des. Chose drape faire son iii mille cette enfin. Etendues sur blanches appareil non laissons une reprises qui. Si ne peuple troupe me paquet gauche mouche marche. Je possedera as puissions ai tangibles au. Remarquait mal atteignait peu sol infiniment mur. Fille va levee rangs va neige en au poing. Seulement gaillards oh ah corbeille. Ans fourneaux ici que ressemble gachettes incapable. Un pere lors on fins ah pois. Car inoui masse eut loups canif betes sorte ces. Son grille net ombres mollir non gronde pareil but jardin. Subitement nid crispation nos fraternite arriverent. Vie corons jet gauche durcis des nouent doigts brumes nul. Voie et pois te chez. Suis tant va doit il bras ca. Verdure que ces attendu conclue chatoie qui. Avancaient fut ses enveloppes des non infanterie vieillards. Au quelques parterre ma tournent philippe on il attelage. Prit or fond poil gens dont tu va la. Ifs laissons philippe oui quarante havresac nez. Aux legerement condamnait renferment des sur souhaitait. Esplanade causaient tarderait que foi repousser. Clairieres avancaient bleuissent ces jet vit. Travers donjons rit eue art semence propice. Pas fit voit une cela paix ange. Les comprendre ame fer frequentes executeurs caracolent. Contree retient en tu revetit dociles. Sa du aussi aimer vingt subit pieds voila. Ils poussait mamelons oui arrivera par. Car nid bete vrai peu toi mais. Ebloui poteau he on ah autant. Seulement ont sentiment quiconque fin peu nos. Poussaient pic tricolores dur arriverent peu lumineuses eclaireurs. Effrayant possedera fin entourage servantes bas art tarderait toi. Pareil ils par vin croire lorsqu fer gronde. Est effrayant jeu fer meconnais caractere quiconque. Poing inoui de abris neige ah arbre. Sais ni en plus avec abat elle. Radieuse ouvertes de premiers quelques ma. As menions sourire express on et changea extreme la. Le pu reve ne abat rire vint joie long. Le canif outre va il on annee. Cet ses pour ruer gens chez dela murs non. Car ans puisque caillou blanche ete ame. Menent balcon chemin nos douane sur. Repousser sacrifiez car distribua citadelle attardent iii vif divergent. Ans entiere ici toi touffes apparat. Ma venu puis plus il. Rien cent va nuit je oh pays. Ras adorer touffe beaute peu ans. Ont trouve aux les ifs parees gronde. Faite armes nul garde sur elles court. Caractere oui viendrait vin accoudees tot certitude. Est ont aux vieillards patiemment republique bouquetins estaminets. Cassait oh dragons ce abattre me. Blancs vin soeurs autres non menent paquet gronde. Et joue seul tu plus. Je la donc veut avez on quoi. Historique bouquetins oh oh poussaient inattendus retrouvait qu. Les descendons assurances pressentit sanctifier remplirent iii compassion. Universel regardent que les prenaient aux massacrer ont. Ils fer electrique sol singuliers cet paraissent. Certains arrivera trophees but vin pas couleurs touchera. Me marmelade epaissies printemps me un la instruite. On digues jeunes la sortit ronfle appela grille. Quand amour carre coeur ete verts vin point toi. Embrassa me donnerai quittent ah un barbares jeterent societes. Encontre il retablir en trouvait ah la. Prime aides eau haine ont des force jet. Pieds desir entre je la patre seule utile. Sortie il ce naitre pleins en canons blason. Iii imprudente nationales frissonner hurlements ete chantaient remarquait. Beffroi conflit cuivres but jeu. Lui neuve essor babil brave son par. Entendu escorte les eclairs eue attendu douleur. Vif singuliers ame frequentes pressaient. Poternes empilait se reposoir epanouir promptes etendues de. Trois poids parmi dites garni on la. Habilement on petitement sa ca claquaient ecouterent. Tristes sur dessert epouses longues rit allaite pouvons une. Pressentit hurlements son ici instrument des. Chose drape faire son iii mille cette enfin. Etendues sur blanches appareil non laissons une reprises qui. Si ne peuple troupe me paquet gauche mouche marche. Prit or fond poil gens dont tu va la. Ifs laissons philippe oui quarante havresac nez. Aux legerement condamnait renferment des sur souhaitait. Esplanade causaient tarderait que foi repousser. Clairieres avancaient bleuissent ces jet vit. Travers donjons rit eue art semence propice. Pas fit voit une cela paix ange. Les comprendre ame fer frequentes executeurs caracolent. Contree retient en tu revetit dociles. Sa du aussi aimer vingt subit pieds voila. Ils poussait mamelons oui arrivera par. Car nid bete vrai peu toi mais. Ebloui poteau he on ah autant. Seulement ont sentiment quiconque fin peu nos. Poussaient pic tricolores dur arriverent peu lumineuses eclaireurs. Effrayant possedera fin entourage servantes bas art tarderait toi. Pareil ils par vin croire lorsqu fer gronde. Est effrayant jeu fer meconnais caractere quiconque. Poing inoui de abris neige ah arbre. Sais ni en plus avec abat elle. Radieuse ouvertes de premiers quelques ma. As menions sourire express on et changea extreme la. Le pu reve ne abat rire vint joie long. Le canif outre va il on annee. Cet ses pour ruer gens chez dela murs non. Car ans puisque caillou blanche ete ame. Menent balcon chemin nos douane sur. Repousser sacrifiez car distribua citadelle attardent iii vif divergent. Ans entiere ici toi touffes apparat. Ma venu puis plus il. Rien cent va nuit je oh pays. Ras adorer touffe beaute peu ans. Ont trouve aux les ifs parees gronde. Faite armes nul garde sur elles court. Caractere oui viendrait vin accoudees tot certitude. Est ont aux vieillards patiemment republique bouquetins estaminets. Cassait oh dragons ce abattre me. Blancs vin soeurs autres non menent paquet gronde. Et joue seul tu plus. Je la donc veut avez on quoi. Historique bouquetins oh oh poussaient inattendus retrouvait qu. Les descendons assurances pressentit sanctifier remplirent iii compassion. Universel regardent que les prenaient aux massacrer ont. Ils fer electrique sol singuliers cet paraissent. Certains arrivera trophees but vin pas couleurs touchera. Me marmelade epaissies printemps me un la instruite. On digues jeunes la sortit ronfle appela grille. Quand amour carre coeur ete verts vin point toi. Embrassa me donnerai quittent ah un barbares jeterent societes. Encontre il retablir en trouvait ah la. Prime aides eau haine ont des force jet. Pieds desir entre je la patre seule utile. Sortie il ce naitre pleins en canons blason. Iii imprudente nationales frissonner hurlements ete chantaient remarquait. Beffroi conflit cuivres but jeu. Lui neuve essor babil brave son par. Entendu escorte les eclairs eue attendu douleur. Vif singuliers ame frequentes pressaient. Poternes empilait se reposoir epanouir promptes etendues de. Trois poids parmi dites garni on la. Habilement on petitement sa ca claquaient ecouterent. Tristes sur dessert epouses longues rit allaite pouvons une. Pressentit hurlements son ici instrument des. Chose drape faire son iii mille cette enfin. Etendues sur blanches appareil non laissons une reprises qui. Si ne peuple troupe me paquet gauche mouche marche.";

    private HandlerIO handler = new TestHandlerIO();

    private PreservationTesseractPlugin preservationTesseractPlugin;

    @Before()
    public void setup() {
        preservationTesseractPlugin = new PreservationTesseractPlugin();
    }

    @Test
    public void should_split_text_content_when_length_excede_vitam_text_maximum_length() throws ProcessingException {
        OutputPreservation output = getOutputPreservationExtracted(TESSERACT_OUTPUT);

        List<OutputExtra> outputExtras =
            Collections.singletonList(OutputExtra.withExtractedMetadataForAu(
                OutputExtra.of(output), output.getExtractedMetadataAU()));

        WorkflowBatchResult batchResult =
            WorkflowBatchResult.of("", "", "", "", outputExtras, "", "", Collections.emptyList());
        List<WorkflowBatchResult> workflowBatchResults = Collections.singletonList(batchResult);
        WorkflowBatchResults batchResults = new WorkflowBatchResults(Paths.get("tmp"), workflowBatchResults);
        handler.addOutputResult(0, batchResults);

        List<ItemStatus> itemStatuses = preservationTesseractPlugin.executeList(null, handler);

        // Then
        Optional<ExtractedMetadataForAu> extractedMetadataForAu =
            ((WorkflowBatchResults) handler.getInput(0)).getWorkflowBatchResults().get(0).getOutputExtras().get(0)
                .getExtractedMetadataAU();
        assertThat(itemStatuses).extracting(ItemStatus::getGlobalStatus).contains(WARNING);
        assertTrue(extractedMetadataForAu.isPresent());
        Object TextContent = extractedMetadataForAu.get().get(TEXT_CONTENT);
        assertTrue(TextContent instanceof List);
        assertEquals(((List) TextContent).size(), 2);
        assertThat(StringEscapeUtils.escapeJava((String) ((List) TextContent).get(0)).length()).isLessThan(VitamConfiguration.getTextMaxLength());
    }

    private OutputPreservation getOutputPreservationExtracted(String metadata) {
        ExtractedMetadataForAu extractedMetadata = new ExtractedMetadataForAu();
        extractedMetadata.put(TEXT_CONTENT, metadata);

        OutputPreservation output = new OutputPreservation();
        output.setStatus(PreservationStatus.OK);
        output.setAction(ActionTypePreservation.EXTRACT_AU);
        output.setExtractedMetadataAU(extractedMetadata);
        return output;
    }
}
